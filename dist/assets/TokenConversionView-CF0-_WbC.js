import{d as ao,r,c as u,w as lo,o as io,k as l,p as o,q as p,G,v as s,F as L,H as y,A as N,L as co,n as k,B as ro,O as P,J as uo,l as i}from"./vue-B2oCC0D2.js";import{u as vo,a as mo,_ as _o}from"./index-CwjfIGrk.js";import"./utils-NIGUFBhG.js";const fo={class:"token-conversion"},ho={class:"conversion-header"},po={class:"header-content"},ko={class:"page-title"},bo={class:"page-subtitle"},To={class:"token-meters"},Lo={class:"meter-header"},yo={class:"token-icon"},go={class:"token-symbol"},Io={class:"meter-content"},$o={class:"balance-value"},Go={class:"balance-meter"},wo={class:"balance-usd"},Co={class:"conversion-main"},Ao={class:"conversion-container"},Do={class:"conversion-card"},Bo={class:"card-header"},So={class:"card-title"},Fo={class:"conversion-type-selector"},Mo=["onClick"],Ho={class:"type-icon"},Vo={class:"type-label"},Ro={class:"conversion-form"},Eo={class:"token-section from-section"},Wo={class:"section-label"},jo={class:"token-input-group"},No={class:"token-selector"},Po={class:"token-icon"},Uo={class:"token-name"},zo={class:"dropdown-icon"},Oo={key:0,class:"token-dropdown"},qo=["onClick"],Jo={class:"token-icon"},Ko={class:"token-name"},Qo={class:"token-balance"},Xo={class:"amount-input-container"},Yo=["placeholder"],Zo={class:"token-balance-info"},xo={class:"balance-label"},os={class:"balance-value"},ss={class:"swap-section"},es=["disabled"],ns={class:"token-section to-section"},ts={class:"section-label"},as={class:"token-input-group"},ls={class:"token-selector"},is={class:"token-icon"},cs={class:"token-name"},rs={class:"dropdown-icon"},ds={key:0,class:"token-dropdown"},us=["onClick"],vs={class:"token-icon"},ms={class:"token-name"},_s={class:"token-balance"},fs={class:"amount-display-container"},hs={class:"amount-display"},ps={class:"conversion-info"},ks={class:"info-grid"},bs={class:"info-item"},Ts={class:"info-label"},Ls={class:"info-value"},ys={class:"info-item"},gs={class:"info-label"},Is={class:"info-value"},$s={class:"info-item"},Gs={class:"info-label"},ws={class:"info-item"},Cs={class:"info-label"},As={class:"info-value"},Ds={key:0,class:"conversion-warning"},Bs={class:"warning-text"},Ss=["disabled"],Fs={key:0,class:"loading-spinner"},Ms={key:1,class:"convert-icon"},Hs={class:"convert-text"},Vs={class:"history-card"},Rs={class:"card-header"},Es={class:"card-title"},Ws={class:"history-controls"},js={value:""},Ns={class:"transaction-list"},Ps={key:0,class:"empty-history"},Us={class:"empty-text"},zs={key:1},Os={class:"transaction-main"},qs={class:"transaction-tokens"},Js={class:"from-token"},Ks={class:"to-token"},Qs={class:"transaction-meta"},Xs={class:"transaction-time"},Ys={class:"transaction-details"},Zs={class:"transaction-rate"},xs=["onClick"],oe={class:"modal-header"},se={class:"modal-title"},ee={class:"modal-body"},ne={class:"confirmation-details"},te={class:"conversion-summary"},ae={class:"summary-row"},le={class:"summary-label"},ie={class:"summary-value"},ce={class:"summary-row"},re={class:"summary-label"},de={class:"summary-value"},ue={class:"confirmation-info"},ve={class:"info-row"},me={class:"info-label"},_e={class:"info-value"},fe={class:"info-row"},he={class:"info-label"},pe={class:"info-value"},ke={class:"info-row"},be={class:"info-label"},Te={class:"confirmation-warning"},Le={class:"warning-text"},ye={class:"modal-footer"},ge={class:"modal-header"},Ie={class:"modal-title"},$e={class:"modal-body"},Ge={key:0,class:"transaction-details-content"},we={class:"detail-section"},Ce={class:"detail-title"},Ae={class:"detail-grid"},De={class:"detail-item"},Be={class:"detail-label"},Se={class:"detail-value"},Fe={class:"detail-item"},Me={class:"detail-label"},He={class:"detail-value"},Ve={class:"detail-item"},Re={class:"detail-label"},Ee={class:"detail-value"},We={class:"detail-item"},je={class:"detail-label"},Ne={class:"detail-value"},Pe={class:"detail-section"},Ue={class:"detail-title"},ze={class:"detail-grid"},Oe={class:"detail-item"},qe={class:"detail-label"},Je={class:"detail-item"},Ke={class:"detail-label"},Qe={class:"detail-value"},Xe={class:"detail-item"},Ye={class:"detail-label"},Ze={class:"detail-value hash"},xe=["href"],on={class:"modal-footer"},sn=ao({__name:"TokenConversionView",setup(en){const{t:nn}=vo(),U=mo(),w=r("standard"),m=r(!1),_=r(!1),g=r(!1),C=r(!1),c=r(null),f=r(!1),b=r(""),A=r([{symbol:"GLIB",icon:"🪙",balance:5e4,maxBalance:1e5,price:1.25,color:"linear-gradient(45deg, #1e40af, #3b82f6)"},{symbol:"GLID",icon:"🏛️",balance:25e3,maxBalance:5e4,price:.85,color:"linear-gradient(45deg, #8b5cf6, #a855f7)"},{symbol:"GLIL",icon:"💧",balance:75e3,maxBalance:15e4,price:1,color:"linear-gradient(45deg, #10b981, #14b8a6)"}]),z=[{id:"standard",icon:"⚡",label:"Standard"},{id:"instant",icon:"🚀",label:"Instant"},{id:"economy",icon:"💰",label:"Economy"}],a=r({fromToken:"GLIB",toToken:"GLID",fromAmount:0,toAmount:0}),D=r([{id:1,fromToken:"GLIB",toToken:"GLID",fromAmount:1e3,toAmount:1200,rate:1.2,fee:.5,status:"completed",timestamp:new Date,hash:"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef12"},{id:2,fromToken:"GLID",toToken:"GLIL",fromAmount:500,toAmount:588,rate:1.176,fee:1,status:"pending",timestamp:new Date(Date.now()-36e5),hash:"0x234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef123"},{id:3,fromToken:"GLIB",toToken:"GLIL",fromAmount:2e3,toAmount:5e3,rate:2.5,fee:1,status:"failed",timestamp:new Date(Date.now()-864e5),hash:"0x34567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234"}]),O=u(()=>["GLIB","GLID","GLIL"].filter(n=>n!==a.value.toToken)),B=u(()=>{const e=["GLIB","GLID","GLIL"],n=a.value.fromToken;return n==="GLIB"?["GLID","GLIL"]:n==="GLID"?["GLIB","GLIL"]:n==="GLIL"?["GLIB","GLID"]:e.filter(t=>t!==n)}),I=u(()=>{const{fromToken:e,toToken:n}=a.value;return{"GLIB-GLID":1.2,"GLID-GLIB":.833,"GLIB-GLIL":2.5,"GLIL-GLIB":.4,"GLID-GLIL":2.083,"GLIL-GLID":.48}[`${e}-${n}`]||1}),$=u(()=>{const e=w.value;return e==="instant"?1:e==="economy"?.3:.5}),S=u(()=>{const e=a.value.fromAmount;return e<1e3?.1:e<1e4?.5:e<5e4?1.2:2.8}),q=u(()=>a.value.toAmount*(1-.01)),H=u(()=>S.value>5?"highPriceImpact":a.value.fromAmount>h(a.value.fromToken)*.8?"highAmount":a.value.fromToken==="GLIB"&&a.value.toToken==="GLIL"?"oneWayConversion":null),V=u(()=>{const{fromToken:e,toToken:n}=a.value;return!(e==="GLIB"&&n==="GLIL")}),R=u(()=>{const{fromAmount:e,fromToken:n}=a.value;return e>0&&e<=h(n)&&!f.value&&U.isConnected}),E=u(()=>b.value?D.value.filter(e=>e.fromToken===b.value||e.toToken===b.value):D.value),d=e=>({GLIB:"🪙",GLID:"🏛️",GLIL:"💧"})[e]||"🪙",h=e=>{const n=A.value.find(t=>t.symbol===e);return n?n.balance:0},J=e=>{w.value=e,v()},K=e=>{a.value.fromToken=e,m.value=!1,B.value.includes(a.value.toToken)||(a.value.toToken=B.value[0]),v()},Q=e=>{a.value.toToken=e,_.value=!1,v()},X=()=>{a.value.fromAmount=h(a.value.fromToken),v()},Y=()=>{if(!V.value)return;const e=a.value.fromToken;a.value.fromToken=a.value.toToken,a.value.toToken=e,v()},v=()=>{const{fromAmount:e}=a.value,n=I.value,t=$.value/100;a.value.toAmount=Math.max(0,e*n*(1-t))},Z=()=>{R.value&&(g.value=!0)},x=async()=>{g.value=!1,f.value=!0;try{await new Promise(n=>setTimeout(n,3e3));const e={id:Date.now(),fromToken:a.value.fromToken,toToken:a.value.toToken,fromAmount:a.value.fromAmount,toAmount:a.value.toAmount,rate:I.value,fee:$.value,status:"completed",timestamp:new Date,hash:`0x${Math.random().toString(16).substr(2,64)}`};D.value.unshift(e),W(a.value.fromToken,-a.value.fromAmount),W(a.value.toToken,a.value.toAmount),a.value.fromAmount=0,a.value.toAmount=0}catch(e){console.error("Conversion failed:",e)}finally{f.value=!1}},W=(e,n)=>{const t=A.value.find(T=>T.symbol===e);t&&(t.balance=Math.max(0,t.balance+n))},F=()=>{g.value=!1},oo=e=>{c.value=e,C.value=!0},M=()=>{C.value=!1,c.value=null},so=()=>{console.log("Refreshing transaction history...")},j=e=>new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e),eo=e=>`${e.slice(0,6)}...${e.slice(-4)}`,no=e=>`https://etherscan.io/tx/${e}`;lo(()=>a.value.fromAmount,v);const to=e=>{e.target?.closest(".token-selector")||(m.value=!1,_.value=!1)};return io(()=>{document.addEventListener("click",to),v()}),(e,n)=>(i(),l("div",fo,[o("header",ho,[o("div",po,[o("h1",ko,[n[6]||(n[6]=o("span",{class:"title-emoji"},"💱",-1)),G(" "+s(e.$t("nav.conversion")),1)]),o("p",bo,s(e.$t("conversion.subtitle")),1)]),o("div",To,[(i(!0),l(L,null,y(A.value,t=>(i(),l("div",{key:t.symbol,class:"token-meter"},[o("div",Lo,[o("span",yo,s(t.icon),1),o("span",go,s(t.symbol),1)]),o("div",Io,[o("div",$o,s(t.balance.toLocaleString()),1),o("div",Go,[o("div",{class:"meter-fill",style:uo({width:`${t.balance/t.maxBalance*100}%`,background:t.color})},null,4)]),o("div",wo,"$"+s((t.balance*t.price).toLocaleString()),1)])]))),128))])]),o("main",Co,[o("div",Ao,[o("div",Do,[o("div",Bo,[o("h2",So,[n[7]||(n[7]=o("span",{class:"card-emoji"},"🔄",-1)),G(" "+s(e.$t("conversion.exchange")),1)]),o("div",Fo,[(i(),l(L,null,y(z,t=>o("button",{key:t.id,class:k(["type-btn",{active:w.value===t.id}]),onClick:T=>J(t.id)},[o("span",Ho,s(t.icon),1),o("span",Vo,s(e.$t(`conversion.types.${t.id}`)),1)],10,Mo)),64))])]),o("div",Ro,[o("div",Eo,[o("label",Wo,s(e.$t("conversion.from")),1),o("div",jo,[o("div",No,[o("button",{class:"token-select-btn",onClick:n[0]||(n[0]=t=>m.value=!m.value)},[o("span",Po,s(d(a.value.fromToken)),1),o("span",Uo,s(a.value.fromToken),1),o("span",zo,s(m.value?"▲":"▼"),1)]),m.value?(i(),l("div",Oo,[(i(!0),l(L,null,y(O.value,t=>(i(),l("button",{key:t,class:"token-option",onClick:T=>K(t)},[o("span",Jo,s(d(t)),1),o("span",Ko,s(t),1),o("span",Qo,s(h(t).toLocaleString()),1)],8,qo))),128))])):p("",!0)]),o("div",Xo,[N(o("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>a.value.fromAmount=t),type:"number",class:"amount-input",placeholder:e.$t("conversion.enterAmount"),onInput:v},null,40,Yo),[[co,a.value.fromAmount]]),o("button",{class:"max-btn",onClick:X},s(e.$t("conversion.max")),1)])]),o("div",Zo,[o("span",xo,s(e.$t("conversion.available"))+":",1),o("span",os,s(h(a.value.fromToken).toLocaleString())+" "+s(a.value.fromToken),1)])]),o("div",ss,[o("button",{class:"swap-button",disabled:!V.value,onClick:Y},n[8]||(n[8]=[o("span",{class:"swap-icon"},"🔄",-1)]),8,es)]),o("div",ns,[o("label",ts,s(e.$t("conversion.to")),1),o("div",as,[o("div",ls,[o("button",{class:"token-select-btn",onClick:n[2]||(n[2]=t=>_.value=!_.value)},[o("span",is,s(d(a.value.toToken)),1),o("span",cs,s(a.value.toToken),1),o("span",rs,s(_.value?"▲":"▼"),1)]),_.value?(i(),l("div",ds,[(i(!0),l(L,null,y(B.value,t=>(i(),l("button",{key:t,class:"token-option",onClick:T=>Q(t)},[o("span",vs,s(d(t)),1),o("span",ms,s(t),1),o("span",_s,s(h(t).toLocaleString()),1)],8,us))),128))])):p("",!0)]),o("div",fs,[o("div",hs,s(a.value.toAmount.toLocaleString()),1)])])]),o("div",ps,[o("div",ks,[o("div",bs,[o("span",Ts,s(e.$t("conversion.rate")),1),o("span",Ls," 1 "+s(a.value.fromToken)+" = "+s(I.value.toFixed(4))+" "+s(a.value.toToken),1)]),o("div",ys,[o("span",gs,s(e.$t("conversion.fee")),1),o("span",Is,s($.value)+"%",1)]),o("div",$s,[o("span",Gs,s(e.$t("conversion.priceImpact")),1),o("span",{class:k(["info-value",{warning:S.value>3}])},s(S.value.toFixed(2))+"% ",3)]),o("div",ws,[o("span",Cs,s(e.$t("conversion.minimumReceived")),1),o("span",As,s(q.value.toLocaleString())+" "+s(a.value.toToken),1)])]),H.value?(i(),l("div",Ds,[n[9]||(n[9]=o("span",{class:"warning-icon"},"⚠️",-1)),o("span",Bs,s(e.$t(`conversion.warnings.${H.value}`)),1)])):p("",!0)]),o("button",{class:k(["convert-button",{loading:f.value}]),disabled:!R.value,onClick:Z},[f.value?(i(),l("span",Fs,"⏳")):(i(),l("span",Ms,"💱")),o("span",Hs,s(f.value?e.$t("conversion.converting"):e.$t("conversion.convert")),1)],10,Ss)])]),o("div",Vs,[o("div",Rs,[o("h2",Es,[n[10]||(n[10]=o("span",{class:"card-emoji"},"📊",-1)),G(" "+s(e.$t("conversion.recentTransactions")),1)]),o("div",Ws,[N(o("select",{"onUpdate:modelValue":n[3]||(n[3]=t=>b.value=t),class:"filter-select"},[o("option",js,s(e.$t("conversion.allTokens")),1),n[11]||(n[11]=o("option",{value:"GLIB"},"GLIB",-1)),n[12]||(n[12]=o("option",{value:"GLID"},"GLID",-1)),n[13]||(n[13]=o("option",{value:"GLIL"},"GLIL",-1))],512),[[ro,b.value]]),o("button",{class:"refresh-btn",onClick:so},n[14]||(n[14]=[o("span",{class:"refresh-icon"},"🔄",-1)]))])]),o("div",Ns,[E.value.length===0?(i(),l("div",Ps,[n[15]||(n[15]=o("span",{class:"empty-icon"},"📭",-1)),o("span",Us,s(e.$t("conversion.noTransactions")),1)])):(i(),l("div",zs,[(i(!0),l(L,null,y(E.value,t=>(i(),l("div",{key:t.id,class:k(["transaction-item",t.status])},[o("div",Os,[o("div",qs,[o("span",Js,s(d(t.fromToken))+" "+s(t.fromAmount.toLocaleString())+" "+s(t.fromToken),1),n[16]||(n[16]=o("span",{class:"arrow"},"→",-1)),o("span",Ks,s(d(t.toToken))+" "+s(t.toAmount.toLocaleString())+" "+s(t.toToken),1)]),o("div",Qs,[o("span",Xs,s(j(t.timestamp)),1),o("span",{class:k(["transaction-status",t.status])},s(e.$t(`conversion.status.${t.status}`)),3)])]),o("div",Ys,[o("span",Zs,s(e.$t("conversion.rate"))+": 1 "+s(t.fromToken)+" = "+s(t.rate.toFixed(4))+" "+s(t.toToken),1),o("button",{class:"details-btn",onClick:T=>oo(t)},s(e.$t("conversion.viewDetails")),9,xs)])],2))),128))]))])])])]),g.value?(i(),l("div",{key:0,class:"modal-overlay",onClick:F},[o("div",{class:"modal-content",onClick:n[4]||(n[4]=P(()=>{},["stop"]))},[o("div",oe,[o("h3",se,s(e.$t("conversion.confirmConversion")),1),o("button",{class:"modal-close",onClick:F},"×")]),o("div",ee,[o("div",ne,[o("div",te,[o("div",ae,[o("span",le,s(e.$t("conversion.youPay")),1),o("span",ie,s(d(a.value.fromToken))+" "+s(a.value.fromAmount.toLocaleString())+" "+s(a.value.fromToken),1)]),n[17]||(n[17]=o("div",{class:"summary-arrow"},"↓",-1)),o("div",ce,[o("span",re,s(e.$t("conversion.youReceive")),1),o("span",de,s(d(a.value.toToken))+" "+s(a.value.toAmount.toLocaleString())+" "+s(a.value.toToken),1)])]),o("div",ue,[o("div",ve,[o("span",me,s(e.$t("conversion.rate")),1),o("span",_e,"1 "+s(a.value.fromToken)+" = "+s(I.value.toFixed(4))+" "+s(a.value.toToken),1)]),o("div",fe,[o("span",he,s(e.$t("conversion.fee")),1),o("span",pe,s((a.value.fromAmount*$.value/100).toFixed(4))+" "+s(a.value.fromToken),1)]),o("div",ke,[o("span",be,s(e.$t("conversion.networkFee")),1),n[18]||(n[18]=o("span",{class:"info-value"},"~0.005 ETH",-1))])]),o("div",Te,[n[19]||(n[19]=o("span",{class:"warning-icon"},"⚠️",-1)),o("span",Le,s(e.$t("conversion.confirmWarning")),1)])])]),o("div",ye,[o("button",{class:"cancel-btn",onClick:F},s(e.$t("common.cancel")),1),o("button",{class:"confirm-btn",onClick:x},[n[20]||(n[20]=o("span",{class:"confirm-icon"},"✅",-1)),G(" "+s(e.$t("conversion.confirmAndConvert")),1)])])])])):p("",!0),C.value?(i(),l("div",{key:1,class:"modal-overlay",onClick:M},[o("div",{class:"modal-content",onClick:n[5]||(n[5]=P(()=>{},["stop"]))},[o("div",ge,[o("h3",Ie,s(e.$t("conversion.transactionDetails")),1),o("button",{class:"modal-close",onClick:M},"×")]),o("div",$e,[c.value?(i(),l("div",Ge,[o("div",we,[o("h4",Ce,s(e.$t("conversion.conversionInfo")),1),o("div",Ae,[o("div",De,[o("span",Be,s(e.$t("conversion.from")),1),o("span",Se,s(d(c.value.fromToken))+" "+s(c.value.fromAmount.toLocaleString())+" "+s(c.value.fromToken),1)]),o("div",Fe,[o("span",Me,s(e.$t("conversion.to")),1),o("span",He,s(d(c.value.toToken))+" "+s(c.value.toAmount.toLocaleString())+" "+s(c.value.toToken),1)]),o("div",Ve,[o("span",Re,s(e.$t("conversion.rate")),1),o("span",Ee,"1 "+s(c.value.fromToken)+" = "+s(c.value.rate.toFixed(4))+" "+s(c.value.toToken),1)]),o("div",We,[o("span",je,s(e.$t("conversion.fee")),1),o("span",Ne,s(c.value.fee)+"%",1)])])]),o("div",Pe,[o("h4",Ue,s(e.$t("conversion.transactionInfo")),1),o("div",ze,[o("div",Oe,[o("span",qe,s(e.$t("conversion.status")),1),o("span",{class:k(["detail-value status",c.value.status])},s(e.$t(`conversion.status.${c.value.status}`)),3)]),o("div",Je,[o("span",Ke,s(e.$t("conversion.timestamp")),1),o("span",Qe,s(j(c.value.timestamp)),1)]),o("div",Xe,[o("span",Ye,s(e.$t("conversion.transactionHash")),1),o("span",Ze,[o("a",{href:no(c.value.hash),target:"_blank"},s(eo(c.value.hash)),9,xe)])])])])])):p("",!0)]),o("div",on,[o("button",{class:"close-btn",onClick:M},s(e.$t("common.close")),1)])])])):p("",!0)]))}}),cn=_o(sn,[["__scopeId","data-v-1d0a220b"]]);export{cn as default};
